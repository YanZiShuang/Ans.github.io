<html>
  <head>
    <!-- website title-->
    <title>Lily Su's Blog </title>
    <!-- icon-->

    <link rel="icon" type="image/x-icon" href="../images/favicon.ico"/>
    <meta charset="utf-8"/>
    <link rel='stylesheet' type='text/css' href='../css/custom.css'>
  </head>
  <body>
    <h1>
      逃离Systemd
    </h1>
    <p>
      因为systemd用起来挺奇怪的不太合适*nix的理念吧，然后想要换回openrc去记录一下
    </p>
    <h2>
      全局设定
    </h2>
    <p>
      首先全局禁用systemd的USE然后mask掉systemd
      我现在的USE(make.conf)如下
    </p>
    <pre><code>
BASE_SYSTEM="grub systemd pulseaudio networkmanager bluetooth touchpad mtp cryptsetup iptables initramfs"
APP="konsole dolphin cups fcitx chromium telegram -nautilus 7zip rar vim samba cups openvpn postgres"
DESKTOP="user-session infinality emoji cjk gtk gtk3 legacy-systray -gnome gnome-keyring"
ELSE="-bindist vim-syntax git bash-completion client icu python brightness-control"
USE="${BASE_SYSTEM} ${APP} ${DESKTOP} ${ELSE}"	
    </pre></code>
    可以看到<code>systemd</code>是被启用的状态那么我们修改USE如下
    <pre><code>
BASE_SYSTEM="grub -systemd pulseaudio  bluetooth iptables initramfs"
APP="7zip"
DESKTOP="gtk gtk3 "
ELSE="git bash-completion client icu"
USE="${BASE_SYSTEM} ${APP} ${DESKTOP} ${ELSE}"		
    </pre></code>
    当然也可以创建<code>use.mask</code>文件并将<code>systemd</code>写入至文件中
    <pre><code>
echo "systemd" >>   /etc/portage/profile/use.mask
    </pre></code>
    <p>
      同时还需要mask掉<code>systemd</code>包和<code>sys-fs/udev</code>包
    </p>
    创建并编辑<code>/etc/portage/package.mask/systemd</code>文件，内容如下：
    <pre><code>
sys-apps/systemd
sys-fs/udev
    </pre></code>
    或者是追加到你的<code>/etc/portage/package.mask</code>文件中
  </body>
  <p>
    添加<code>INSTALL_MASK</code>至<code>make.conf</code>文件
  </p>
  <pre><code>
INSTALL_MASK="/lib/systemd /usr/lib/systemd"      
  </pre></code>
  <p>
    更新world
  </p>
  <pre><code>
emerge --newuse --deep @world
  </pre></code>
</html>
